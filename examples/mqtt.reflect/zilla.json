{
    "vaults":
    [
        {
            "name": "server",
            "type": "filesystem",
            "options":
            {
                "keys":
                {
                    "store": "localhost.p12",
                    "type": "pkcs12",
                    "password": "generated"
                }
            }
        }
    ],
    "bindings":
    [
        {
            "entry": "tcp0",
            "type" : "tcp",
            "kind": "SERVER",
            "options":
            {
                "host": "0.0.0.0",
                "port": 1883
            },
            "exit": "mqtt0"
        },
        {
            "entry": "tcp1",
            "type" : "tcp",
            "kind": "SERVER",
            "options":
            {
                "host": "0.0.0.0",
                "port": 8883
            },
            "exit": "tls0"
        },
        {
            "entry": "tls0",
            "type" : "tls",
            "kind": "SERVER",
            "vault": "server",
            "options":
            {
                "keys": [ "localhost" ],
                "serverNames": [ "localhost" ]
            },
            "exit": "mqtt0"
        },
        {
            "entry": "mqtt0",
            "type" : "mqtt",
            "kind": "SERVER",
            "routes":
            [
                {
                    "exit": "fan0",
                    "when":
                    [
                        {
                            "topic": "zilla"
                        }
                    ]
                }   
            ]
        },
        {
            "entry": "fan0",
            "type" : "fan",
            "kind": "SERVER",
            "exit": "echo0"
        },
        {
            "entry": "echo0",
            "type" : "echo",
            "kind": "SERVER"
        }
    ]
}

